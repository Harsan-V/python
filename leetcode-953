class Solution(object):
    def isAlienSorted(self, words, order):
        # Step 1: build rank map for characters
        rank = {}
        for i, ch in enumerate(order):
            rank[ch] = i

        # Step 2: helper to check if w1 <= w2 in alien order
        def in_order(w1, w2):
            # compare character by character
            for i in range(min(len(w1), len(w2))):
                c1, c2 = w1[i], w2[i]
                if c1 != c2:
                    # compare using alien rank
                    return rank[c1] < rank[c2]
            # all equal so far â†’ shorter word should come first
            return len(w1) <= len(w2)

        # Step 3: check all adjacent pairs
        for i in range(len(words) - 1):
            if not in_order(words[i], words[i + 1]):
                return False

        return True
